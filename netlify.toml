[build]
  publish = "."

# ===== COMING SOON MODE =====
# Redirect all page routes to homepage (coming soon page)
# Remove this block and uncomment "Live site redirects" to go live

[[redirects]]
  from = "/companies"
  to = "/"
  status = 302
  force = true

[[redirects]]
  from = "/mission"
  to = "/"
  status = 302
  force = true

[[redirects]]
  from = "/products"
  to = "/"
  status = 302
  force = true

[[redirects]]
  from = "/contact"
  to = "/"
  status = 302
  force = true

[[redirects]]
  from = "/privacy"
  to = "/"
  status = 302
  force = true

[[redirects]]
  from = "/privacy-en"
  to = "/"
  status = 302
  force = true

# Allow thank-you-coming-soon (form redirect target)
[[redirects]]
  from = "/thank-you-coming-soon"
  to = "/thank-you-coming-soon.html"
  status = 200

# ===== END COMING SOON MODE =====

# Enable pretty URLs (removes .html extension)
[[redirects]]
  from = "/*"
  to = "/:splat.html"
  status = 200
  force = false

# Ensure index.html is served for root
[[redirects]]
  from = "/"
  to = "/index.html"
  status = 200

# Security Headers
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"
    Permissions-Policy = "camera=(), microphone=(), geolocation=()"
    Content-Security-Policy = "default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://cdn.tailwindcss.com https://unpkg.com https://formspree.io https://cloud.umami.is; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://formspree.io https://cloud.umami.is; frame-src 'none'"
